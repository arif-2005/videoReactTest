{"version":3,"sources":["views/videoTest.js","App.js","index.js"],"names":["VideoTest","props","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","videoElm","useRef","useState","GStream","setGStream","audio","video","settings","setSettings","tracks","setTracks","videoDevice","setVideoDevice","devices","func","turnVideo","a","mediaDevices","enumerateDevices","then","device","audioIn","filter","kind","audioOut","length","console","log","options","echoCancellation","deviceId","stream","current","srcObject","onloadedmetadata","e","play","err","name","cursor","displaySurface","noiseSuppression","sampleRate","getDisplayMedia","oninactive","useEffect","className","id","ref","autoPlay","playsInline","onClick","audioTrack","getAudioTracks","forEach","track","removeTrack","addTrack","disabled","videoTrack","getVideoTracks","style","opacity","App","exact","path","component","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93f4aa6f.chunk.js","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\n\r\n\r\nexport default function VideoTest(props) {\r\n      navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\r\n      // navigator.mediaDevices = navigator.mediaDevices || navigator.webkitMediaDevices || navigator.mozMediaDevices;\r\n\r\n      const videoElm = useRef(null);\r\n      const [GStream, setGStream] = useState(); // global stream.\r\n      const [settings, setSettings] = useState({ // settings.\r\n            audio: true,\r\n            video: true\r\n      });\r\n      const [tracks, setTracks] = useState({ audio: [], video: [] }); // all tracks.\r\n      // function to mute.\r\n      function Mute(e) {\r\n            if (settings.audio) { // mute audio.\r\n                  var audioTrack = GStream.getAudioTracks();\r\n                  setTracks({ ...tracks, audio: audioTrack });\r\n                  audioTrack.forEach(track => {\r\n                        GStream.removeTrack(track);\r\n                  });\r\n                  setSettings({ ...settings, audio: false });\r\n            } else { // unmute audio.\r\n                  tracks.audio.forEach(track => {\r\n                        GStream.addTrack(track);\r\n                  });\r\n                  setSettings({ ...settings, audio: true });\r\n            }\r\n      }\r\n      // function to turn camera on/off.\r\n      function CameraOnOff(e) {\r\n            // console.log(devices);\r\n            if (settings.video) { // turn off camera.\r\n                  var videoTrack = GStream.getVideoTracks();\r\n                  setTracks({ ...tracks, video: videoTrack });\r\n                  videoTrack.forEach(track => {\r\n                        GStream.removeTrack(track);\r\n                  });\r\n                  setSettings({ ...settings, video: false });\r\n                  videoElm.current.style.opacity = '0';\r\n            } else { // turn on camera.\r\n                  tracks.video.forEach(track => {\r\n                        GStream.addTrack(track);\r\n                  });\r\n                  setSettings({ ...settings, video: true });\r\n                  videoElm.current.style.opacity = '1';\r\n            }\r\n      }\r\n      const [videoDevice, setVideoDevice] = useState(0);\r\n      var devices = {};\r\n      async function func(turnVideo) {\r\n\r\n            await navigator.mediaDevices.enumerateDevices() // get all media devices.\r\n                  .then(device => {\r\n                        devices = {\r\n                              audioIn: device.filter(device => device.kind === 'audioinput'),\r\n                              audioOut: device.filter(device => device.kind === 'audiooutput'),\r\n                              video: device.filter(device => device.kind === 'videoinput')\r\n                        };\r\n                  });\r\n            if (turnVideo) {\r\n                  if (videoDevice < devices.video.length - 1) {\r\n                        setVideoDevice(videoDevice + 1);\r\n                  } else {\r\n                        setVideoDevice(0);\r\n                  }\r\n            }\r\n            console.log(devices.video.length);\r\n            console.log(videoDevice);\r\n            const options = {\r\n                  audio: { echoCancellation: true },\r\n                  video: {\r\n                        deviceId: devices.video[videoDevice].deviceId,\r\n                  }\r\n            }\r\n            if (navigator.getUserMedia) {\r\n                  navigator.getUserMedia(options,\r\n                        function (stream) {\r\n                              videoElm.current.srcObject = stream;\r\n                              videoElm.current.onloadedmetadata = function (e) {\r\n                                    videoElm.current.play();\r\n                              };\r\n                              setSettings({ ...settings, audio: true }); // turn on mice.\r\n                              setGStream(stream);\r\n                        },\r\n                        function (err) {\r\n                              console.log(\"The following error occurred: \" + err.name);\r\n                        }\r\n                  );\r\n            } else {\r\n                  console.log(\"getUserMedia not supported\");\r\n            }\r\n      }\r\n      async function ShareScreen() {\r\n            let stream;\r\n            const options = {\r\n                  video: {\r\n                        cursor: 'always',\r\n                        displaySurface: 'application'\r\n                  },\r\n                  audio: {\r\n                        echoCancellation: true,\r\n                        noiseSuppression: true,\r\n                        sampleRate: 44100\r\n                  }\r\n            };\r\n            if (navigator.mediaDevices.getDisplayMedia) {\r\n                  try {\r\n                        stream = await navigator.mediaDevices.getDisplayMedia(options);\r\n                        videoElm.current.srcObject = stream;\r\n                        videoElm.current.onloadedmetadata = function (e) {\r\n                              videoElm.current.play();\r\n                        };\r\n                        stream.oninactive = () => { // Click on browser UI stop sharing button\r\n                              func();\r\n                        };\r\n                        setGStream();\r\n                  } catch (err) {\r\n                        func();\r\n                  }\r\n            }\r\n\r\n      }\r\n\r\n      useEffect(() => {\r\n            // eslint-disable-next-line\r\n            // ShareScreen();\r\n            func();\r\n      }, []);\r\n\r\n      return (\r\n            <div className=\"w-full h-80\">\r\n                  <div className=\"relative w-full h-80 bg-black\">\r\n                        <div className=\"relative z-10 top-0 w-full h-full flex justify-center items-center\">hello</div>\r\n                        <video id=\"myVideo\" ref={videoElm} autoPlay playsInline className=\"absolute top-0 z-20 w-full h-full object-center opacity-100\" />\r\n                  </div>\r\n                  <div>\r\n                        <button onClick={Mute} disabled={GStream ? false : true} className=\"px-4 py-2 bg-red-400 hover:bg-red-700 rounded-md m-2.5\">{settings.audio ? 'Mute' : 'Unmute'}</button>\r\n                        <button onClick={CameraOnOff} disabled={GStream ? false : true} className=\"px-4 py-2 bg-red-400 hover:bg-red-700 rounded-md m-2.5\">Video {settings.video ? 'Off' : 'On'}</button>\r\n                        <button onClick={e => { func(true) }} disabled={GStream ? false : true} className=\"px-4 py-2 bg-red-400 hover:bg-red-700 rounded-md m-2.5\">Camera Rotate</button>\r\n                        <button onClick={ShareScreen} disabled={GStream ? false : true} className=\"px-4 py-2 bg-red-400 hover:bg-red-700 rounded-md m-2.5\">Share Screen</button>\r\n                  </div>\r\n            </div>\r\n      );\r\n}\r\n","import { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\r\n\r\n// import Home from './views/home';\r\nimport VideoTest from './views/videoTest';\r\n// import Projects from './views/projects';\r\n\r\nfunction App() {\r\n      return (\r\n            <Router>\r\n                  <Switch>\r\n                        <Route exact path={[ \"/\", \"home\" ]} component={ VideoTest } />\r\n                        {/* <Route exact path=\"/about\" component={ About } /> */}\r\n                        {/* <Route exact path=\"/projects\" component={ Projects } /> */}\r\n                        <Redirect to=\"/\"/>\r\n                  </Switch>\r\n            </Router>\r\n      );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}